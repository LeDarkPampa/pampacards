<div class="screen">
  <div class="game-container">
    <div class="ligneCenter" *ngIf="finDePartie">
      Fin de la partie ! Victoire de {{vainqueur}}
    </div>
    <div class="ligneCenter">
      <div *ngIf="userId == lastEvent.joueurActifId && !finDePartie">
        A votre tour de jouer
        <button pButton type="button" label="Fin de tour" (click)="finDeTour()"></button>
      </div>
      <div *ngIf="userId != lastEvent.joueurActifId && !finDePartie">
        A votre adversaire de jouer
      </div>
      <div class="ligneCenter" *ngIf="!finDePartie">
        <button pButton type="button" label="Abandonner" (click)="confirmAbandon()" class="p-button-danger"></button>
      </div>
    </div>
    <div class="ligneCenter">
      {{adversaire.nom}} - Score : {{adversaire.score}}
    </div>
    <div class="player-container-dark">
      <div class="ligneCenter">
        <div *ngFor="let carte of adversaire.main">
          <app-carte-main-adv [carte]="carte"></app-carte-main-adv>
        </div>
      </div>
    </div>
    <div class="player-container">
      <div class="ligne">
        <div class="deck-container">
          <h4>Deck : {{adversaire.deck.length}}</h4>
          <div class="card-container" *ngIf="adversaire.deck.length > 0">
            <div class="card"></div>
          </div>
        </div>
        <div class="board-container">
          <div class="ligneCenter">
            <div *ngFor="let carte of adversaire.terrain">
              <app-carte-terrain [carte]="carte"></app-carte-terrain>
            </div>
          </div>
        </div>
        <div class="discard-container">
          <h4>Défausse : {{adversaire.defausse.length}}</h4>
          <div class="card-container" *ngIf="adversaire.defausse.length > 0">
            <div class="card" (click)="voirDefausse(this.adversaire.defausse)"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="player-container">
      <div class="ligne">
        <div class="deck-container">
          <h4>Deck : {{joueur.deck.length}}</h4>
          <div class="card-container" *ngIf="joueur.deck.length > 0">
            <div class="card"></div>
          </div>
        </div>
        <div class="board-container">
          <div class="ligneCenter">
            <div *ngFor="let carte of joueur.terrain">
              <app-carte-terrain [carte]="carte" [estJoueurActif]="estJoueurActif" (clickedCarte)="clickedCarte($event)"></app-carte-terrain>
            </div>
          </div>
        </div>
        <div class="discard-container">
          <h4>Défausse : {{joueur.defausse.length}}</h4>
          <div class="card-container" *ngIf="joueur.defausse.length > 0">
            <div class="card" (click)="voirDefausse(this.joueur.defausse)"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="player-container-dark">
      <div class="ligneCenter">
        <div *ngFor="let carte of joueur.main">
          <app-carte-main (jouer)="onJouerCarte($event)" (defausser)="onDefausserCarte($event)" [carte]="carte"
                          [estJoueurActif]="estJoueurActif" [carteJouee]="carteJouee"
                          [carteDefaussee]="carteDefaussee" (clickedCarte)="clickedCarte($event)"></app-carte-main>
        </div>
      </div>
    </div>
    <div class="ligneCenter">
      {{joueur.nom}} - Score : {{joueur.score}}
    </div>
  </div>
  <div class="bandeau-droite">
    <div class="chat-container">
      <div class="chat-messages">
        <div *ngFor="let message of chatMessages">
          <div class="chat-message">
            <span class="sender">{{message.auteur}}</span>
            <span class="content">{{message.texte}}</span>
          </div>
        </div>
      </div>
    </div>
    <div class="chat-input">
      <input type="text" pInputText [(ngModel)]="message" placeholder="Votre message"/>
      <button type="button" (click)="sendMessage()">Envoyer</button>
    </div>
  </div>
</div>
